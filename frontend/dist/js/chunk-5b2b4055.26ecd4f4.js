(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b2b4055"],{"698d":function(t,e,a){"use strict";a("ea44")},b03f:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cashflow"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"always"}},[a("div",{staticClass:"contant"},[a("div",{staticClass:"topbox"},[t._v("本日収入")]),a("div",{staticClass:"income"},[t._v("+ "+t._s(t.today.income)+"円")])])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"always"}},[a("div",{staticClass:"contant"},[a("div",{staticClass:"topbox"},[t._v("本日支出")]),a("div",{staticClass:"expenses"},[t._v("- "+t._s(t.today.expense)+"円")])])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"always"}},[a("div",{staticClass:"contant"},[a("div",{staticClass:"topbox"},[t._v("本日余剰")]),a("div",{staticClass:"rest"},[t._v(t._s(t.today.income-t.today.expense)+"円")])])])],1)],1),a("el-card",{staticStyle:{"margin-top":"10px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{display:"flex","flex-direction":"row","align-items":"center"},attrs:{span:20}},[a("span",{staticStyle:{"padding-right":"0.5rem"}},[t._v("期間を選択してください")]),a("el-date-picker",{attrs:{type:"daterange",align:"center","unlink-panels":"","range-separator":"To","picker-options":t.pickerOptions},on:{change:t.dataChangeHandler},model:{value:t.datevalue,callback:function(e){t.datevalue=e},expression:"datevalue"}})],1),a("el-col",{attrs:{span:4}},[a("el-tooltip",{attrs:{content:"add",placement:"top",effect:"light",enterable:!1}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-plus",circle:""},on:{click:function(e){t.addDataDialogFormVisible=!0}}})],1)],1)],1)],1),a("el-card",{staticClass:"table",attrs:{"body-style":{padding:"12px"}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"備考"}},[a("span",[t._v(t._s(e.row.remark))])]),1==e.row.hasfile?a("el-form-item",{attrs:{label:"ファイル"}},[a("a",{attrs:{href:t.downloadurl},on:{click:function(a){return t.downloadfile(e.row.id)}}},[a("el-button",{attrs:{type:"info",icon:"el-icon-download",round:""}})],1)]):t._e()],1)]}}])}),a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{prop:"date",label:"日期",width:"120"}}),a("el-table-column",{attrs:{prop:"client",label:"取引先",width:"180"}}),a("el-table-column",{attrs:{prop:"usage",label:"用途",width:"500"}}),a("el-table-column",{attrs:{prop:"amount",label:"金額"}}),a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{content:"edit",placement:"top",effect:"light",enterable:!1}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.editTableData(e.row)}}})],1),a("el-tooltip",{attrs:{content:"delete",placement:"top",effect:"light",enterable:!1}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.deleteTableData(e.row.id)}}})],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":t.pageinfo.currentpage,"page-sizes":[15,50,100],"page-size":t.pageinfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageinfo.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"記録添加",visible:t.addDataDialogFormVisible,width:"40%"},on:{"update:visible":function(e){t.addDataDialogFormVisible=e},close:function(e){return t.closeDialog()}}},[a("el-form",{ref:"addDataFormRef",attrs:{model:t.addData,"label-width":"120px",rules:t.rules}},[a("el-form-item",{attrs:{label:"タイプ",prop:"type"}},[a("el-col",{attrs:{span:20}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:""},model:{value:t.addData.type,callback:function(e){t.$set(t.addData,"type",e)},expression:"addData.type"}},[a("el-option",{attrs:{label:"支出",value:"0"}}),a("el-option",{attrs:{label:"収入",value:"1"}})],1)],1)],1),a("el-form-item",{attrs:{label:"金額",prop:"amount"}},[a("el-col",{attrs:{span:20}},[a("el-input",{model:{value:t.addData.amount,callback:function(e){t.$set(t.addData,"amount",e)},expression:"addData.amount"}})],1)],1),a("el-form-item",{attrs:{label:"日付",prop:"date"}},[a("el-col",{attrs:{span:20}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:t.addData.date,callback:function(e){t.$set(t.addData,"date",e)},expression:"addData.date"}})],1)],1),a("el-form-item",{attrs:{label:"用途",prop:"usage"}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{type:"textarea",maxlength:"50"},model:{value:t.addData.usage,callback:function(e){t.$set(t.addData,"usage",e)},expression:"addData.usage"}})],1)],1),a("el-form-item",{attrs:{label:"取引先",prop:"client"}},[a("el-col",{attrs:{span:20}},[a("el-input",{model:{value:t.addData.client,callback:function(e){t.$set(t.addData,"client",e)},expression:"addData.client"}})],1)],1),a("el-form-item",{attrs:{label:"備考",prop:"remark"}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{type:"textarea",maxlength:"100"},model:{value:t.addData.remark,callback:function(e){t.$set(t.addData,"remark",e)},expression:"addData.remark"}})],1)],1),a("el-form-item",{attrs:{label:"ファイル",prop:"file"}},[a("el-col",{attrs:{span:20}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:t.actionURL,drag:"",name:"file",limit:1,"on-remove":t.handleRemove,"file-list":t.fileList,"auto-upload":!1}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.closeDialog()}}},[t._v("戻　る")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.validateForm()}}},[t._v("追　加")])],1)],1),a("el-dialog",{attrs:{title:"記録編集",visible:t.editDataDialogFormVisible,width:"40%"},on:{"update:visible":function(e){t.editDataDialogFormVisible=e},close:function(e){return t.closeEditDialog()}}},[a("el-form",{ref:"editDataFormRef",attrs:{model:t.editData,"label-width":"120px",rules:t.rules}},[a("el-form-item",{attrs:{label:"タイプ",prop:"type"}},[a("el-col",{attrs:{span:20}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:""},model:{value:0==t.editData.type?"支出":"收入",callback:function(e){t.$set(t.editData,"type==0?'支出':'收入'",e)},expression:"editData.type==0?'支出':'收入'"}},[a("el-option",{attrs:{label:"支出",value:"0"}}),a("el-option",{attrs:{label:"収入",value:"1"}})],1)],1)],1),a("el-form-item",{attrs:{label:"金額",prop:"amount"}},[a("el-col",{attrs:{span:20}},[a("el-input",{model:{value:t.editData.amount,callback:function(e){t.$set(t.editData,"amount",e)},expression:"editData.amount"}})],1)],1),a("el-form-item",{attrs:{label:"日付",prop:"date"}},[a("el-col",{attrs:{span:20}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:t.editData.date,callback:function(e){t.$set(t.editData,"date",e)},expression:"editData.date"}})],1)],1),a("el-form-item",{attrs:{label:"用途",prop:"usage"}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{type:"textarea",maxlength:"50"},model:{value:t.editData.usage,callback:function(e){t.$set(t.editData,"usage",e)},expression:"editData.usage"}})],1)],1),a("el-form-item",{attrs:{label:"取引先",prop:"client"}},[a("el-col",{attrs:{span:20}},[a("el-input",{model:{value:t.editData.client,callback:function(e){t.$set(t.editData,"client",e)},expression:"editData.client"}})],1)],1),a("el-form-item",{attrs:{label:"備考",prop:"remark"}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{type:"textarea",maxlength:"100"},model:{value:t.editData.remark,callback:function(e){t.$set(t.editData,"remark",e)},expression:"editData.remark"}})],1)],1),a("el-form-item",{attrs:{label:"ファイル",prop:"file"}},[a("el-col",{attrs:{span:20}},[a("el-upload",{ref:"update",staticClass:"upload-demo",attrs:{action:t.actionURL,drag:"",name:"file",limit:1,"on-remove":t.handleRemove,"file-list":t.fileList,"auto-upload":!1}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.closeEditDialog()}}},[t._v("戻　る")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.validateEditForm()}}},[t._v("編　集")])],1)],1)],1)},r=[],i=a("1da1"),n=(a("96cf"),a("ac1f"),a("00b4"),a("d9e2"),a("d401"),a("0d03"),a("c975"),a("a434"),{data:function(){var t=function(t,e,a){var l=/^[0-9]/;if(l.test(e))return a();a(new Error("Please input right amount"))};return{datevalue:"",addDataDialogFormVisible:!1,editDataDialogFormVisible:!1,formLabelWidth:"120px",fileList:[],downloadurl:"",addData:{date:"",amount:"",type:"",usage:"",remark:"",client:""},editData:{},pageinfo:{pagesize:15,total:0,currentpage:1},today:{},tableData:[],actionURL:"",pickerOptions:{shortcuts:[{text:"本月",onClick:function(t){t.$emit("pick",[new Date,new Date])}},{text:"一年間",onClick:function(t){var e=new Date,a=new Date((new Date).getFullYear(),0);t.$emit("pick",[a,e])}},{text:"最近六ヶ月",onClick:function(t){var e=new Date,a=new Date;a.setMonth(a.getMonth()-6),t.$emit("pick",[a,e])}}]},rules:{amount:[{required:!0,trigger:"blur"},{validator:t,trigger:"blur"}],usage:[{required:!0,trigger:"blur"},{max:50,message:"max length is 50",trigger:"blur"}],remark:[{required:!0,trigger:"blur"},{max:100,message:"max length is 100",trigger:"blur"}],client:[{required:!0,trigger:"blur"},{max:50,message:"max length is 50",trigger:"blur"}],date:[{required:!0,trigger:"blur"}],type:[{required:!0,trigger:"blur"}]}}},created:function(){this.getData()},methods:{dataChangeHandler:function(t){this.getData()},getData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,l,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0===t.datevalue[0]||void 0===t.datevalue[1]){e.next=11;break}return console.log(t.datevalue),e.next=4,t.$http.post("cashflow/tabledata",{start:t.datevalue[0],end:t.datevalue[1],page:t.pageinfo});case 4:a=e.sent,l=a.data,t.tableData=l.tableData,t.pageinfo.total=l.total,t.today=l.today,e.next=18;break;case 11:return e.next=13,t.$http.post("cashflow/tabledata",{start:"",end:"",page:t.pageinfo});case 13:r=e.sent,i=r.data,t.tableData=i.tableData,t.pageinfo.total=i.total,t.today=i.today;case 18:case"end":return e.stop()}}),e)})))()},tableRowClassName:function(t){var e=t.row;t.rowIndex;return 0==e.type?"warning-row":"success-row"},deleteTableData:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var l,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$http.post("cashflow/delete",{id:t});case 2:l=a.sent,r=l.data,200==r.code?(e.$message.success("delete data successful"),e.getData()):e.$message.error("delete data failed");case 5:case"end":return a.stop()}}),a)})))()},editTableData:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.editData=t,e.editDataDialogFormVisible=!0;case 2:case"end":return a.stop()}}),a)})))()},closeDialog:function(){this.$refs["addDataFormRef"].resetFields(),this.addDataDialogFormVisible=!1},closeEditDialog:function(){this.$refs["editDataFormRef"].resetFields(),this.editDataDialogFormVisible=!1},validateForm:function(){var t=this;this.$refs["addDataFormRef"].validate((function(e){if(!e)return!1;t.addTableData()}))},validateEditForm:function(){var t=this;this.$refs["editDataFormRef"].validate((function(e){if(!e)return!1;t.submitEditData()}))},submitEditData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("cashflow/update",t.editData);case 2:a=e.sent,l=a.data,t.actionURL="http://127.0.0.1:8000/api/cashflow/uploadfile/"+t.editData.id,t.$refs["update"].submit(),200==l.code?(t.$message.success("upload data successful"),t.closeEditDialog(),t.getData()):t.$message.error("upload data failed");case 7:case"end":return e.stop()}}),e)})))()},addTableData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.addData),e.next=3,t.$http.post("cashflow/additem",t.addData);case 3:if(a=e.sent,l=a.data,t.actionURL="http://127.0.0.1:8000/api/cashflow/uploadfile/"+l.id,200!=l.code){e.next=12;break}return e.next=9,t.$message.info("Uploaded data");case 9:t.$refs["upload"].submit(),e.next=13;break;case 12:t.$message.error("Data upload failed");case 13:t.closeDialog(),t.getData();case 15:case"end":return e.stop()}}),e)})))()},handleRemove:function(t,e){var a=e.indexOf(t);e.splice(a,1)},handleSizeChange:function(t){this.pageinfo.currentpage=1,this.pageinfo.pagesize=t,this.getData()},handleCurrentChange:function(t){this.pageinfo.currentpage=t,this.getData()},downloadfile:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.downloadurl="http://127.0.0.1:8000/api/cashflow/downloadfile/"+t;case 1:case"end":return a.stop()}}),a)})))()}}}),o=n,s=(a("698d"),a("2877")),d=Object(s["a"])(o,l,r,!1,null,null,null);e["default"]=d.exports},ea44:function(t,e,a){}}]);
//# sourceMappingURL=chunk-5b2b4055.26ecd4f4.js.map